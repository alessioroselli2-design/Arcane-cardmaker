<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Arcane CardMaker</title>
  <meta name="theme-color" content="#111" />
  <link rel="stylesheet" href="style.css" />
  <!-- jsPDF per i PDF -->
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js" defer></script>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Spectral:wght@400;600&family=Inter:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Welcome / Accesso -->
  <div id="welcome" class="modal-mask">
    <div class="modal-card">
      <h2>Benvenuto in Card Maker</h2>
      <p>Crea carte in stile Magic. Accedi per salvare nella tua Libreria Cloud, oppure entra come Ospite.</p>
      <div class="stack">
        <div class="row">
          <input id="email" type="email" placeholder="Email">
          <input id="password" type="password" placeholder="Password">
        </div>
        <div class="row">
          <button class="btn primary" id="btnLogin">Accedi</button>
          <button class="btn" id="btnSignup">Registrati</button>
          <button class="btn ghost" id="btnGuest">Entra come ospite</button>
        </div>
        <label class="muted"><input type="checkbox" id="dontShow"> Non mostrare più</label>
      </div>
    </div>
  </div>

  <header>
    <strong>Arcane CardMaker</strong>
    <div class="row">
      <span id="userStatus" class="muted">Ospite</span>
      <button id="btnLogout" class="btn" style="display:none">Esci</button>
    </div>
  </header>

  <div class="wrap">
    <!-- Pannello comandi -->
    <aside class="panel" id="controls">
      <h3>Fronte</h3>
      <!-- ... TUTTI I TUOI CONTROLLI CARTE (come già erano) ... -->
<h3>Salvataggi</h3>
<div class="row2">
  <div><label>Nome carta</label><input id="cardName" placeholder="Es. Lame del Bosco"></div>
  <div><label>Mazzo (cartella cloud, opz.)</label><input id="deckName" placeholder="Es. Incantesimi Druido"></div>
</div>

<div class="btnbar">
  <button class="btn" id="saveLocal">Salva locale</button>
  <button class="btn" id="loadLocal">Apri libreria locale</button>
</div>
<div id="localLibrary" class="library" style="display:none"></div>

<div class="group" data-auth="only">
  <h4>Account & Cloud</h4>
  <div class="row2">
    <button class="btn" id="btnCloudSave">Salva su cloud</button>
    <button class="btn" id="btnCloudPull">Apri libreria cloud</button>
    <button class="btn danger" id="btnCloudClear">Svuota cloud</button>
  </div>
  <div id="cloudLibrary" class="library" style="display:none"></div>
</div>
     

      <h3>Export</h3>
      <div class="btnbar">
        <button class="btn" id="pngFront">PNG (fronte)</button>
        <button class="btn" id="pngBack">PNG (retro)</button>
        <button class="btn" id="pdfSingleFront">PDF singola (fronte)</button>
        <button class="btn" id="pdfSingleBack">PDF singola (retro)</button>
        <button class="btn" id="pdfA4Front">PDF A4 3×3 (fronti)</button>
        <button class="btn" id="pdfA4Back">PDF A4 3×3 (retro)</button>
        <button class="btn" id="pdfA4Both">PDF A4 3×3 (fronte+retro)</button>
      </div>
      <small class="muted">Stampa A4 verticale, margini minimi, scala 100%.</small>
    </aside>

    <!-- Anteprime -->
    <section class="panel preview">
      <div class="previewHead"><h3>Anteprima</h3></div>
      <div class="grid2">
        <div>
          <canvas id="cardFront" width="750" height="1050" aria-label="Fronte"></canvas>
        </div>
        <div>
          <canvas id="cardBack" width="750" height="1050" aria-label="Retro"></canvas>
        </div>
      </div>
    </section>
  </div>

  <!-- Script -->
  <script type="module" src="firebase.js"></script>
  <script type="module" src="card.js"></script>
  <script type="module" src="card-local.js"></script>
  <script type="module" src="export.js"></script>
  <script type="module" src="auth.js"></script>
</body>
</html>
